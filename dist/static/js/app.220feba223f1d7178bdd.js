webpackJsonp([3],{139:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.sid?"DownloadList":"Login")},s=[],a={render:r,staticRenderFns:s};e.a=a},140:function(t,e,n){"use strict";var r=n(141),s=n(142),a=new r.a.Store({modules:{syno:s}});e.a=a},142:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"state",function(){return v}),n.d(e,"mutations",function(){return _}),n.d(e,"actions",function(){return h}),n.d(e,"getters",function(){return g});var r,s=n(61),a=n.n(s),o=n(62),i=n.n(o),c=n(143),u=n.n(c),l=n(147),d=n(148),p=(n.n(d),n(29)),f=n.n(p),m={isInitDS:!1,sid:"",synoKey:"",taskList:[],dsOption:{protocol:"http",address:"localhost",port:"5001",debug:!1,success:!1,message:""}},v=m,_=(r={},u()(r,l.a.SET_SID,function(t,e){console.log("mutations sid",e),t.sid=e,t.dsOption.token=e}),u()(r,l.a.REMOVE_SID,function(t){t.sid=""}),u()(r,l.a.SET_SYNOKEY,function(t,e){t.synoKey=e}),u()(r,l.a.SET_DSAPI,function(t,e){t.ds=e,t.isInitDS=!0}),u()(r,l.a.SET_TASKLIST,function(t,e){t.taskList=e}),u()(r,l.a.CLEAN_DSSTATE,function(t){m}),r),h={initDS:function(t){var e=t.commit,n=t.state,r=new d.DownloadStation(n.dsOption);e(l.a.SET_DSAPI,r),n.ds.setRequestOption({params:{synoKey:n.synoKey}})},login:function(t,e){var n=this,r=(t.commit,t.state),s=t.dispatch;return i()(a.a.mark(function t(){var o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.ds){t.next=3;break}return console.error("未初始化"),t.abrupt("return");case 3:return t.next=5,r.ds.login(e);case 5:o=t.sent,o.data.sid?s("setSid",o.data.sid):console.error("登陆失败",o);case 7:case"end":return t.stop()}},t,n)}))()},getTasks:function(t){var e=this,n=t.commit,r=t.state,s=t.dispatch;return i()(a.a.mark(function t(){var o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.ds.getTasks();case 2:if(o=t.sent,!0!==o.success){t.next=6;break}return n(l.a.SET_TASKLIST,o.data.tasks),t.abrupt("return");case 6:105===o.error.code&&s("logout");case 7:case"end":return t.stop()}},t,e)}))()},cleanDSState:function(t){(0,t.commit)(l.a.CLEAN_DSSTATE)},logout:function(t){var e=t.dispatch;window.localStorage.removeItem("sid"),e("cleanDSState")},setSid:function(t,e){var n=t.commit;window.localStorage.setItem("sid",e),n(l.a.SET_SID,e)},setsynoKey:function(t,e){var n=t.commit;window.localStorage.setItem("synoKey",e),n(l.a.SET_SYNOKEY,e)},downloadUrl:function(t,e){var n=this;t.commit;return i()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.ds.createTask({uri:e});case 2:if(r=t.sent,!r.data.success){t.next=6;break}return n.url="",t.abrupt("return",alert("添加下载成功"));case 6:alert("下载失败",r.error.code);case 7:case"end":return t.stop()}},t,n)}))()},downloadTorrent:function(t,e){var n=this;t.commit,t.dispatch;return i()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f()({url:"http://localhost:5001/creatTorrent",data:e,method:"post"});case 2:r=t.sent,r.success&&alert("创建种子下载成功");case 4:case"end":return t.stop()}},t,n)}))()}},g={}},147:function(t,e,n){"use strict";e.a={SET_SID:"SET_SID",SET_SYNOKEY:"SET_SOCKETNAME",SET_DSAPI:"SET_DSAPI",SET_TASKLIST:"SET_TASKLIST",REMOVE_SID:"REMOVE_SID",CLEAN_DSSTATE:"CLEAN_DSSTATE"}},20:function(t,e){t.exports=Vue},29:function(t,e){t.exports=axios},60:function(t,e){t.exports=Vuex},70:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(71),s=(n.n(r),n(73)),a=n.n(s),o=n(74),i=(n.n(o),n(20)),c=n.n(i),u=n(75),l=n(79),d=n(140);c.a.use(a.a),c.a.config.productionTip=!1,new c.a({el:"#app",router:l.a,store:d.a,template:"<App/>",components:{App:u.a}})},71:function(t,e){},75:function(t,e,n){"use strict";function r(t){n(76)}var s=n(77),a=n(78),o=n(9),i=r,c=o(s.a,a.a,i,null,null);e.a=c.exports},76:function(t,e){},77:function(t,e,n){"use strict";e.a={name:"app",components:{comheader:function(){return n.e(1).then(n.bind(null,166))}}}},78:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("comheader"),t._v(" "),n("router-view")],1)},s=[],a={render:r,staticRenderFns:s};e.a=a},79:function(t,e,n){"use strict";var r=n(20),s=n.n(r),a=n(80),o=n.n(a),i=n(81),c=n(85);s.a.use(o.a),e.a=new o.a({routes:[{path:"/",name:"Hello",component:i.a},{path:"/download",name:"Download",component:c.a}]})},80:function(t,e){t.exports=VueRouter},81:function(t,e,n){"use strict";function r(t){n(82)}var s=n(83),a=n(84),o=n(9),i=r,c=o(s.a,a.a,i,"data-v-2b5a585a",null);e.a=c.exports},82:function(t,e){},83:function(t,e,n){"use strict";e.a={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},84:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://gitter.im/vuejs/vue",target:"_blank"}},[t._v("Gitter Chat")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("Docs for This Template")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[t._v("vue-router")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[t._v("vuex")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[t._v("vue-loader")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}],a={render:r,staticRenderFns:s};e.a=a},85:function(t,e,n){"use strict";var r=n(86),s=n(139),a=n(9),o=a(r.a,s.a,null,null,null);e.a=o.exports},86:function(t,e,n){"use strict";var r=n(87),s=n(60);n.n(s);e.a={components:{Login:r.a,DownloadList:function(){return n.e(0).then(n.bind(null,167))}},computed:Object(s.mapState)({sid:function(t){return t.syno.sid},synoKey:function(t){return t.syno.synoKey}}),mounted:function(){var t=window.localStorage.getItem("sid"),e=window.localStorage.getItem("synoKey");if(t&&!this.sid&&this.$store.dispatch("setSid",t),e&&!this.synoKey&&this.$store.dispatch("setsynoKey",e),!e||!t)return this.$store.dispatch("cleanDSState")}}},87:function(t,e,n){"use strict";function r(t){n(88)}var s=n(89),a=n(90),o=n(9),i=r,c=o(s.a,a.a,i,"data-v-19e8f76a",null);e.a=c.exports},88:function(t,e){},89:function(t,e,n){"use strict";e.a={data:function(){return{loginForm:{account:"",passwd:"",synoKey:""}}},methods:{submit:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.$store.dispatch("setsynoKey",e.loginForm.synoKey),console.log("验证通过",e.loginForm),e.$store.state.syno.isInitDS||e.$store.dispatch("initDS"),e.$store.dispatch("login",e.loginForm)):console.log("error submit")})}}}},90:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-wrapper"},[n("div",{staticClass:"login-bg"}),t._v(" "),n("div",{staticClass:"dialog-wrapper"},[n("div",{staticClass:"msg-wrapper"},[t._v("使用家里的群晖账号密码登录")]),t._v(" "),n("div",{staticClass:"login-input-wrapper"},[n("el-form",{ref:"loginForm",attrs:{model:t.loginForm}},[n("el-form-item",{attrs:{prop:"account",rules:[{required:!0,message:"不能为空"}]}},[n("el-input",{staticClass:"login-input",attrs:{placeholder:"用户名"},model:{value:t.loginForm.account,callback:function(e){t.loginForm.account=e},expression:"loginForm.account"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"passwd",rules:[{required:!0,message:"不能为空"}]}},[n("el-input",{staticClass:"login-input",attrs:{type:"password",placeholder:"密码",required:""},model:{value:t.loginForm.passwd,callback:function(e){t.loginForm.passwd=e},expression:"loginForm.passwd"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"synoKey",rules:[{required:!0,message:"不能为空"}]}},[n("el-input",{staticClass:"login-input",attrs:{placeholder:"在local端配置的Key",required:""},model:{value:t.loginForm.synoKey,callback:function(e){t.loginForm.synoKey=e},expression:"loginForm.synoKey"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"info"},on:{click:function(e){t.submit("loginForm")}}},[t._v("Login")])],1)],1)],1)])])},s=[],a={render:r,staticRenderFns:s};e.a=a}},[70]);
//# sourceMappingURL=app.220feba223f1d7178bdd.js.map